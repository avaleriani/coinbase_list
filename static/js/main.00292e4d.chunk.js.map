{"version":3,"sources":["assets/images/coins.gif","components/Spinner/Spinner.js","components/List/List.js","components/hooks/useFetchAPI.js","components/MainPage/MainPage.js","components/ErrorBoundary/ErrorBoundary.js","components/App/App.js","index.js"],"names":["module","exports","__webpack_require__","p","Spinner","react_default","a","createElement","className","alt","src","SpinnerImg","List","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","displayStatus","status","statusClass","concat","displayStats","stats","open","high","low","volume","last","volume_30day","react","state","items","allLoaded","getStatsFromProducts","props","data","products","genFunc","item","fetch","process","id","then","_ref","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","prev","next","t0","t1","display_name","t2","json","t3","sent","abrupt","stop","_x2","apply","arguments","originalContext","genObj","interval","setInterval","generatorResult","value","setState","toConsumableArray","done","clearInterval","_this2","map","key","components_Spinner_Spinner","Component","defaultProps","useFetchAPI","initialUrl","initialData","_useState","useState","_useState2","slicedToArray","setData","_useState3","_useState4","url","setUrl","_useState5","_useState6","isLoading","setIsLoading","_useState7","_useState8","isError","setIsError","fetchData","result","jsonResponse","useEffect","doGet","MainPage","_fetchJsonHook","fetchJsonHook","components_List_List","ErrorBoundary","hasError","error","info","console","log","children","App","components_ErrorBoundary_ErrorBoundary","MainPage_MainPage","ReactDOM","render","App_App","document","getElementById"],"mappings":"4EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,0UCYzBC,SARC,WACd,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACbH,EAAAC,EAAAC,cAAA,OAAKE,IAAI,UAAUC,IAAMC,SCFzBC,cACJ,SAAAA,IAAc,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,IACZC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,KAAAH,QAkDFI,cAAgB,SAACC,GACf,IAAIC,EAAc,UAMlB,MAJe,WAAXD,IACFC,EAAc,UAGTjB,EAAAC,EAAAC,cAAA,OAAKC,UAAS,kBAAAe,OAAsBD,MA1D/BT,EA6DdW,aAAe,SAACC,GACd,IAAIC,EAAMC,EAAMC,EAAKC,EAAQC,EAAMC,EAKnC,OAJIN,IACCC,EAAgDD,EAAhDC,KAAMC,EAA0CF,EAA1CE,KAAMC,EAAoCH,EAApCG,IAAKC,EAA+BJ,EAA/BI,OAAQC,EAAuBL,EAAvBK,KAAMC,EAAiBN,EAAjBM,cAIlC1B,EAAAC,EAAAC,cAACyB,EAAA,SAAD,KACE3B,EAAAC,EAAAC,cAAA,UAAMmB,GACNrB,EAAAC,EAAAC,cAAA,UAAMoB,GACNtB,EAAAC,EAAAC,cAAA,UAAMqB,GACNvB,EAAAC,EAAAC,cAAA,UAAMsB,GACNxB,EAAAC,EAAAC,cAAA,UAAMuB,GACNzB,EAAAC,EAAAC,cAAA,UAAMwB,KAxEVlB,EAAKoB,MAAQ,CACXC,MAAO,GACPC,WAAW,GAJDtB,mFASZG,KAAKoB,qBAAqBpB,KAAKqB,MAAMC,2FAMZC,eAqBfC,yRAEN,OADMC,mBACAC,MAAK,GAAAnB,OAAKoB,+BAAL,cAAApB,OAAsDkB,EAAKG,GAA3D,WACRC,KADG,eAAAC,EAAAhC,OAAAiC,EAAA,EAAAjC,CAAAkC,EAAA1C,EAAA2C,KACE,SAAAC,EAAMC,GAAN,OAAAH,EAAA1C,EAAA8C,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAG,GAEIf,EAAKG,GAFTS,EAAAI,GAGchB,EAAKiB,aAHnBL,EAAAM,GAIQlB,EAAKpB,OAJbgC,EAAAE,KAAA,EAKaJ,EAASS,OALtB,cAAAP,EAAAQ,GAAAR,EAAAS,KAAAT,EAAAU,OAAA,UAEFnB,GAFES,EAAAG,GAGFE,aAHEL,EAAAI,GAIFpC,OAJEgC,EAAAM,GAKFlC,MALE4B,EAAAQ,KAAA,wBAAAR,EAAAW,SAAAd,EAAAlC,SADF,gBAAAiD,GAAA,OAAAnB,EAAAoB,MAAAlD,KAAAmD,YAAA,mDADQ5B,8bADRC,GApBJ4B,EAAkBpD,KACpBqD,EAAS7B,IAET8B,EAAWC,YAAY,WACzB,IAAIC,EAAkBH,EAAOd,OAEzBiB,EAAgBC,OAClBD,EAAgBC,MAAM5B,KAAK,SAAA4B,GACzBL,EAAgBM,SAAS,CACvBxC,MAAK,GAAAX,OAAAT,OAAA6D,EAAA,EAAA7D,CAAMsD,EAAgBnC,MAAMC,OAA5B,CAAmCuC,QAK1CD,EAAgBI,OAClBC,cAAcP,GACdF,EAAgBM,SAAS,CAAEvC,WAAW,MAEvC,yIA8CI,IAAA2C,EAAA9D,KACP,OACEX,EAAAC,EAAAC,cAACyB,EAAA,SAAD,KACE3B,EAAAC,EAAAC,cAAA,SAAOC,UAAU,QACfH,EAAAC,EAAAC,cAAA,aACAF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,iBACAF,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,sBAGFF,EAAAC,EAAAC,cAAA,aACES,KAAKiB,MAAMC,MAAM6C,IAAI,SAACtC,GACtB,OAAOpC,EAAAC,EAAAC,cAAA,MAAIyE,IAAG,OAAAzD,OAAWkB,EAAKG,KAC5BvC,EAAAC,EAAAC,cAAA,UAAMkC,EAAKiB,cACToB,EAAKtD,aAAaiB,EAAKhB,OACzBpB,EAAAC,EAAAC,cAAA,UAAMuE,EAAK1D,cAAcqB,EAAKpB,cAMpChB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBAAf,IAAsCQ,KAAKiB,MAAME,UAAY,KAAO9B,EAAAC,EAAAC,cAAC0E,EAAD,eA5GzDC,aAsHnBtE,EAAKuE,aAAe,CAClB7C,KAAM,IAGO1B,eC7FAwE,EAhCK,SAACC,EAAYC,GAAgB,IAAAC,EACvBC,mBAASF,GADcG,EAAA3E,OAAA4E,EAAA,EAAA5E,CAAAyE,EAAA,GACxCjD,EADwCmD,EAAA,GAClCE,EADkCF,EAAA,GAAAG,EAEzBJ,mBAASH,GAFgBQ,EAAA/E,OAAA4E,EAAA,EAAA5E,CAAA8E,EAAA,GAExCE,EAFwCD,EAAA,GAEnCE,EAFmCF,EAAA,GAAAG,EAGbR,oBAAS,GAHIS,EAAAnF,OAAA4E,EAAA,EAAA5E,CAAAkF,EAAA,GAGxCE,EAHwCD,EAAA,GAG7BE,EAH6BF,EAAA,GAAAG,EAIjBZ,oBAAS,GAJQa,EAAAvF,OAAA4E,EAAA,EAAA5E,CAAAsF,EAAA,GAIxCE,EAJwCD,EAAA,GAI/BE,EAJ+BF,EAAA,GAMzCG,EAAS,eAAA1D,EAAAhC,OAAAiC,EAAA,EAAAjC,CAAAkC,EAAA1C,EAAA2C,KAAG,SAAAC,IAAA,IAAAuD,EAAAC,EAAA,OAAA1D,EAAA1C,EAAA8C,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAChBgD,GAAW,GACXJ,GAAa,GAFG9C,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAKOb,MAAMoD,GALb,cAKRW,EALQpD,EAAAS,KAAAT,EAAAE,KAAA,EAMakD,EAAO7C,OANpB,OAMR8C,EANQrD,EAAAS,KAOd6B,EAAQe,GAPMrD,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAG,GAAAH,EAAA,SASdkD,GAAW,GATG,QAYhBJ,GAAa,GAZG,yBAAA9C,EAAAW,SAAAd,EAAAlC,KAAA,aAAH,yBAAA8B,EAAAoB,MAAAlD,KAAAmD,YAAA,GAefwC,oBAAU,WACRH,KACC,CAACV,IAMJ,MAAO,CAAExD,OAAM4D,YAAWI,UAASM,MAJrB,SAACd,GACbC,EAAOD,YCRIe,MAdf,WAAoB,IAAAC,EACmBC,EAAa,GAAAxF,OAC5CoB,+BAD4C,aAE9C,IAFIL,EADUwE,EACVxE,KAAM4D,EADIY,EACJZ,UAAWI,EADPQ,EACOR,QAKzB,OACEjG,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACX8F,GAAWjG,EAAAC,EAAAC,cAAA,oFACX2F,EAAY7F,EAAAC,EAAAC,cAAC0E,EAAD,MAAa5E,EAAAC,EAAAC,cAACyG,EAAD,CAAM1E,KAAOA,MCU/B2E,cAtBb,SAAAA,EAAY5E,GAAO,IAAAxB,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAiG,IACjBpG,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAmG,GAAA9F,KAAAH,KAAMqB,KACDJ,MAAQ,CAAEiF,UAAU,GAFRrG,iFASDsG,EAAOC,GACvBC,QAAQC,IAAIH,EAAOC,oCAInB,OAAIpG,KAAKiB,MAAMiF,SACN7G,EAAAC,EAAAC,cAAA,mCAGFS,KAAKqB,MAAMkF,4DAbYJ,GAC9B,MAAO,CAAED,UAAU,UAPKhC,aCUbsC,MARf,WACE,OACEnH,EAAAC,EAAAC,cAACkH,EAAD,KACEpH,EAAAC,EAAAC,cAACmH,EAAD,QCFNC,IAASC,OAAOvH,EAAAC,EAAAC,cAACsH,EAAD,MAAQC,SAASC,eAAe","file":"static/js/main.00292e4d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/coins.7e7fa540.gif\";","import React from 'react';\nimport SpinnerImg from '../../assets/images/coins.gif';\nimport './spinner.scss';\n\nconst Spinner = () => {\n  return (\n    <div className=\"spinner\">\n      <img alt=\"spinner\" src={ SpinnerImg }/>\n    </div>\n  );\n};\n\nexport default Spinner;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport './list.scss';\nimport Spinner from \"../Spinner/Spinner\";\n\nclass List extends Component {\n  constructor() {\n    super();\n    this.state = {\n      items: [],\n      allLoaded: false\n    };\n  }\n\n  componentDidMount() {\n    this.getStatsFromProducts(this.props.data);\n  }\n\n  //This function iterates over each product and call the api for getting the stats\n  //every 300ms to not get the 429 too many request error. Then updates the state every\n  //time a response is achieved.\n  async getStatsFromProducts(products) {\n    const originalContext = this;\n    let genObj = genFunc();\n\n    let interval = setInterval(() => {\n      let generatorResult = genObj.next();\n\n      if (generatorResult.value) {\n        generatorResult.value.then(value => {\n          originalContext.setState({\n            items: [...originalContext.state.items, value]\n          })\n        });\n      }\n\n      if (generatorResult.done) {\n        clearInterval(interval);\n        originalContext.setState({ allLoaded: true });\n      }\n    }, 300);\n\n    function* genFunc() {\n      for(let item of products) {\n        yield fetch(`${ process.env.REACT_APP_API_BASE_URL }/products/${ item.id }/stats`)\n          .then(async(response) => {\n            return {\n              \"id\": item.id,\n              \"display_name\": item.display_name,\n              \"status\": item.status,\n              \"stats\": await response.json()\n            };\n          });\n      }\n    }\n  }\n\n  displayStatus = (status) => {\n    let statusClass = \"offline\";\n\n    if (status === \"online\") {\n      statusClass = \"online\";\n    }\n\n    return <div className={ `status status--${ statusClass }` }/>;\n  };\n\n  displayStats = (stats) => {\n    let open, high, low, volume, last, volume_30day;\n    if (stats) {\n      ({ open, high, low, volume, last, volume_30day } = stats);\n    }\n\n    return (\n      <Fragment>\n        <td>{ open }</td>\n        <td>{ high }</td>\n        <td>{ low }</td>\n        <td>{ volume }</td>\n        <td>{ last }</td>\n        <td>{ volume_30day }</td>\n      </Fragment>\n    )\n  };\n\n\n  render() {\n    return (\n      <Fragment>\n        <table className=\"list\">\n          <thead>\n          <tr>\n            <th>Name</th>\n            <th>Open</th>\n            <th>High</th>\n            <th>Low</th>\n            <th>Volume</th>\n            <th>Last</th>\n            <th>Volume 30 days</th>\n            <th>Status</th>\n          </tr>\n          </thead>\n          <tbody>\n          { this.state.items.map((item) => {\n            return <tr key={ `row-${ item.id }` }>\n              <td>{ item.display_name }</td>\n              { this.displayStats(item.stats) }\n              <td>{ this.displayStatus(item.status) }</td>\n            </tr>\n          })\n          }\n          </tbody>\n        </table>\n        <div className=\"spinner-container\"> { this.state.allLoaded ? null : <Spinner/> }</div>\n      </Fragment>\n    );\n  }\n}\n\nList.propTypes = {\n  data: PropTypes.array\n};\n\nList.defaultProps = {\n  data: []\n};\n\nexport default List;\n","import { useState, useEffect } from 'react';\n\nconst useFetchAPI = (initialUrl, initialData) => {\n  const [data, setData] = useState(initialData);\n  const [url, setUrl] = useState(initialUrl);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isError, setIsError] = useState(false);\n\n  const fetchData = async() => {\n    setIsError(false);\n    setIsLoading(true);\n\n    try {\n      const result = await fetch(url);\n      const jsonResponse = await result.json();\n      setData(jsonResponse);\n    } catch(error) {\n      setIsError(true);\n    }\n\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, [url]);\n\n  const doGet = (url) => {\n    setUrl(url);\n  };\n\n  return { data, isLoading, isError, doGet };\n};\n\nexport default useFetchAPI;","import React from 'react';\nimport List from \"../List/List\";\nimport Spinner from \"../Spinner/Spinner\";\nimport fetchJsonHook from \"../hooks/useFetchAPI\";\nimport './main-page.scss';\n\nfunction MainPage() {\n  const { data, isLoading, isError } = fetchJsonHook(\n    `${ process.env.REACT_APP_API_BASE_URL }/products`\n    , []\n  );\n\n  return (\n    <div className=\"main-page\">\n      { isError && <div>There was an error while getting data from the API, please try again.</div> }\n      { isLoading ? <Spinner/> : <List data={ data }/> }\n    </div>\n  );\n}\n\nexport default MainPage;\n\n","import React, { Component } from 'react';\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    console.log(error, info);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;","import React from 'react';\nimport MainPage from '../MainPage/MainPage'\nimport ErrorBoundary from \"../ErrorBoundary/ErrorBoundary\";\n\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <MainPage/>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/App/App';\n\nReactDOM.render(<App/>, document.getElementById('root'));\n"],"sourceRoot":""}